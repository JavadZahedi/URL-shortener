{% extends 'URLshortener/base.html' %}
{% load static %}
{% load custom_filters %}
{% load custom_tags %}

{% block head %}
	<link rel='stylesheet' href="{% static 'URLshortener/css/dashboard.css' %}">
	<title> Dashboard </title>
{% endblock %}

{% block header %}
    <div class='container-fluid row p-0 m-0'>
        <div class='col-sm-3 p-2 text-center'>
            {% if user.profile.photo %}
            <img class='w-100 rounded-circle img-thumbnail' src='{{ user.profile.photo.url }}'>
            {% else %}
            <img class='w-100 rounded-circle img-thumbnail' src='{% static "URLshortener/images/user_avatar.png" %}'>
            {% endif %}
        </div>
        <div class='col-sm-9 text-white text-right p-2'>
            <div class='user-info p-2'>
                <div class='row p-2'>
                    <div class='col-sm-5'>نام کاربری:</div>
                    <div class='col-sm-7'>{{ user.username }}</div>
                </div>
                <div class='row p-2'>
                    <div class='col-sm-5'>نام:</div>
                    <div class='col-sm-7'>{{ user.first_name }}</div>
                </div>
                <div class='row p-2'>
                    <div class='col-sm-5'>نام خانوادگی:</div>
                    <div class='col-sm-7'>{{ user.last_name }}</div>
                </div>
                <div class='row p-2'>
                    <div class='col-sm-5'>تاریخ تولد:</div>
                    <div class='col-sm-7'>{{ user.profile.birth_date_jalali }}</div>
                </div>
                <div class='row p-2'>
                    <div class='col-sm-5'>ایمیل:</div>
                    <div class='col-sm-7'>{{ user.email }}</div>
                </div>
                <div class='row p-2'>
                    <div class='col-sm-5'>تعداد نشانی های کوتاه شده:</div>
                    <div class='col-sm-7'>{{ page_obj.paginator.count|to_persian }}</div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block main %}
    <div class='row container-fluid p-0 m-0'>
        <aside class='col-sm-3 p-2 m-0'>
            <ul class='nav flex-column text-center text-white p-0 m-0 rounded border'>
                <li class="nav-item p-2"><a class='d-block' href="{% url 'URLshortener:home' %}" >صفحه اصلی</a></li>
                <li class="nav-item p-2"><a class='d-block' href="{% url 'URLshortener:add-url' %}" >اضافه کردن نشانی</a></li>
                <li class="nav-item p-2"><a class='d-block' href="{% url 'URLshortener:edit-profile' %}" >تغییر اطلاعات</a></li>
                <li class="nav-item p-2"><a class='d-block' href="{% url 'auth_logout' %}?next=/" >خروج</a></li>
            </ul>
        </aside>
        <div class='col-sm-9 p-2 m-0'>
            <div class='container text-center text-white p-2 main-title'>نشانی های اضافه شده</div>
            {% if page_obj %}
                <div class='container table-responsive p-0 my-2 mx-auto table-div'>
                    {% url_cards page_obj %}
                </div>
            {% else %}
                <div class='alert alert-info text-right p-2 m-2 mx-auto'>
                    هنوز هیچ نشانی ای توسط اضافه نشده است!
                </div>
            {% endif %}

            {% if is_paginated %}
                {% paginator page_obj %}
            {% endif %}
        </div>
    </div>

{% endblock %}